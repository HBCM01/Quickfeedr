<div class="container">
<h1>All Jobs</h1>

  <div class="search">

    <div class="search-form">
      <%= form_tag jobs_path, method: :get, class: "rel", id: "form" do %>
      <input type="text" name="query" class="form-control rel" placeholder="Search all jobs..." >
      <i class="fa fa-search tb"></i>
      <% end %>
    </div>

      <br>
  </div>




<br>
<div class="job-container">
  <div class="job-all col-5" data-turbolinks-permanent>
      <% @jobs.each do |job| %>
          <div class="job-card">
            <%= link_to job_path(job), class: 'job-link' do %>
            <div class="job-title">
            <% if job.photo.attached? %>
              <%= cl_image_tag job.photo.key, height: 100, width: 100, crop: :fill, class: "card-image" %>
            <% end %>
              <div><h2><%= job.title %></h2></div>
            </div>
            <div class="job-container">
              <div><h3><%= job.location %></h3></div>
              <h5><%= job.salary %></h5>
              </div>
              <p><%= job.description %></p>
            <% end %>
          </div>
    <% end %>
  </div>
  <div class=" col-5 " id="job-map">
    <div class="job-location">
  <button><%= link_to "Apply Now!", job_job_applications_path(@job, anchor: "job-#{@job.id}"), method: :post  %></button>
  <h1><%= @job.title %></h1>
  <h2><%= @job.location %></h2>
  <h3><%= @job.salary %></h3>
  <p><%= @job.description %></p>
  <p><%= @job.job_spec %></p>

   <div id="map"
  style="width: 100%; height: 300px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">

</div>
</div>
</div>

</div>


<script>
  document.querySelector(".tb").addEventListener("click", () => {
    document.getElementById("form").submit();
  })
</script>
